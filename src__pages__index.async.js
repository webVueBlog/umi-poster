"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[858],{65202:function(G,h,a){a.r(h),a.d(h,{default:function(){return V}});var J=a(30467),y=a(55673),Q=a(60257),F=a(65400),Y=a(1131),C=a(28465),H=a(59567),m=a(8799),K=a(29809),u=a(97538),X=a(89858),g=a(51024),$=a(56120),j=a(74253),w=a(58136),f=a(5789),k=a(75314),x=a(11187),N=a(42122),v=a.n(N),Z=a(70215),E=a.n(Z),A=a(27424),D=a.n(A),P=a(6941),B=a(67294),I=a(61120),U=a.n(I),T=a.p+"static/2.6931a1a5.jpg",s={content:"content___fr8u_",template:"template___zkSLt","training-title":"training-title___BKg_f",user:"user___YC4ZP",user__avatar:"user__avatar___sQVM3",user__name:"user__name___otWR8",result:"result___ztgYS","result-metric__value":"result-metric__value___cD8hQ","result-metric__label":"result-metric__label___V2X5D"},e=a(85893),S=["userAvatarUpload"],L=function(c,t){var n=new FileReader;n.addEventListener("load",function(){return t(n.result)}),n.readAsDataURL(c)};function V(){var p=(0,B.useState)({}),c=D()(p,2),t=c[0],n=c[1],M=function(l,i){var d=l.userAvatarUpload,o=E()(l,S);n(function(b){return v()(v()({},b),o)})},R=function(l){var i="".concat(l.userName,"_").concat(l.trainingName,"\u8BAD\u7EC3\u8425_\u7B2C").concat(l.trainingNo,"\u671F.jpg");U()(document.getElementById("template")).then(function(d){var o=document.createElement("a");o.href=d.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream"),o.download=i,o.click()})},z=function(l){var i=l.type==="image/jpeg"||l.type==="image/png";i||x.default.error("\u53EA\u80FD\u4E0A\u4F20 JPG/PNG \u7C7B\u578B\u7684\u56FE\u7247");var d=l.size/1024/1024<2;return d||x.default.error("\u56FE\u7247\u4E0D\u80FD\u8D85\u8FC7 2MB"),!1},O=function(l){L(l.file,function(i){n(function(d){return v()(v()({},d),{},{userAvatar:i})})})},W=(0,B.useMemo)(function(){return[{label:"\u6253\u5361\u5929\u6570",value:t.clockDays},{label:"\u603B\u76EE\u6807\u6570",value:t.totalTargetCount},{label:"\u8BC4\u5206",value:t.totalPoints}]},[t.clockDays,t.totalTargetCount,t.totalPoints]);return(0,e.jsxs)(y.Z,{gutter:10,className:s.content,children:[(0,e.jsx)(f.Z,{span:12,children:(0,e.jsxs)("div",{className:s.template,id:"template",children:[(0,e.jsx)("img",{src:T}),(0,e.jsxs)("div",{className:s["training-title"],children:[t.trainingName||"--","\u8BAD\u7EC3\u8425_\u7B2C",t.trainingNo||"--","\u671F"]}),(0,e.jsxs)("div",{className:s.user,children:[(0,e.jsx)("div",{className:s.user__avatar,children:(0,e.jsx)("img",{src:t.userAvatar})}),(0,e.jsx)("div",{className:s.user__name,children:t.userName})]}),(0,e.jsx)("div",{className:s.result,children:W.map(function(r){return(0,e.jsxs)("div",{className:s["result-metric"],children:[(0,e.jsx)("div",{className:s["result-metric__value"],children:r.value||0}),(0,e.jsx)("div",{className:s["result-metric__label"],children:r.label})]},r.label)})})]})}),(0,e.jsx)(f.Z,{span:8,children:(0,e.jsxs)(u.Z,{labelCol:{span:6},onValuesChange:M,onFinish:R,children:[(0,e.jsx)(j.Z,{orientation:"left",children:"\u6807\u9898\u8BBE\u7F6E"}),(0,e.jsx)(u.Z.Item,{name:"trainingName",label:"\u6807\u9898\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}],children:(0,e.jsx)(g.Z,{placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"})}),(0,e.jsx)(u.Z.Item,{name:"trainingNo",label:"\u7B2C\u51E0\u671F",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7B2C\u51E0\u671F"}],children:(0,e.jsx)(m.Z,{min:1,max:999,placeholder:"\u8BF7\u8F93\u5165\u7B2C\u51E0\u671F",style:{width:"100%"}})}),(0,e.jsx)(j.Z,{orientation:"left",children:"\u5185\u5BB9\u8BBE\u7F6E"}),(0,e.jsx)(u.Z.Item,{name:"userName",label:"\u5B66\u5458\u59D3\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B66\u5458\u59D3\u540D"}],children:(0,e.jsx)(g.Z,{placeholder:"\u8BF7\u8F93\u5165\u5B66\u5458\u59D3\u540D"})}),(0,e.jsx)(u.Z.Item,{name:"userAvatarUpload",label:"\u5B66\u5458\u5934\u50CF",valuePropName:"file",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u5B66\u5458\u5934\u50CF"}],children:(0,e.jsx)(C.Z,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:z,onChange:O,children:t.userAvatar?(0,e.jsx)("img",{src:t.userAvatar,alt:"avatar",style:{height:"100%"}}):(0,e.jsxs)("div",{children:[(0,e.jsx)(P.Z,{}),(0,e.jsx)("div",{style:{marginTop:8},children:"\u9009\u62E9\u56FE\u7247"})]})})}),(0,e.jsx)(u.Z.Item,{name:"clockDays",label:"\u6253\u5361\u5929\u6570",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6253\u5361\u5929\u6570"}],children:(0,e.jsx)(m.Z,{min:0,max:21,placeholder:"\u8BF7\u8F93\u5165\u6253\u5361\u5929\u6570",style:{width:"100%"}})}),(0,e.jsx)(u.Z.Item,{name:"totalTargetCount",label:"\u603B\u76EE\u6807\u6570",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u603B\u76EE\u6807\u6570"}],children:(0,e.jsx)(m.Z,{min:0,max:99,placeholder:"\u8BF7\u8F93\u5165\u603B\u76EE\u6807\u6570",style:{width:"100%"}})}),(0,e.jsx)(u.Z.Item,{name:"totalPoints",label:"\u8BC4\u5206",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BC4\u5206"}],children:(0,e.jsx)(m.Z,{min:0,max:99,placeholder:"\u8BF7\u8F93\u5165\u8BC4\u5206",style:{width:"100%"}})}),(0,e.jsx)(u.Z.Item,{wrapperCol:{offset:6},children:(0,e.jsx)(F.default,{type:"primary",htmlType:"submit",children:"\u751F\u6210\u8BC1\u4E66"})})]})})]})}}}]);
